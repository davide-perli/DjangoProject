<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Produse - Gelaterie</title>
</head>
<body>
    <header>
        <h1>Produse - Filtrare și Paginare</h1>
    </header>

    <!-- Formular pentru filtre -->
    <section id="filtre-produs">
        <h2>Filtrează produsele</h2>
        <form method="get">
            <div class="form-group">
                <label for="nume">Nume prăjitură:</label>
                <input type="text" id="nume" name="nume" value="{{ form.cleaned_data.nume }}"> <!-- Patrez valorile introduse in campul de filtrare (raman datele la refresh)-->
            </div>
            <div class="form-group">
                <label for="pret_min">Preț minim:</label>
                <input type="number" id="pret_min" name="pret_min" step="0.50" value="{{ form.cleaned_data.pret_min }}">
            </div>
            <div class="form-group">
                <label for="pret_max">Preț maxim:</label>
                <input type="number" id="pret_max" name="pret_max" step="0.50" value="{{ form.cleaned_data.pret_max }}">
            </div>
            <button type="submit">Filtrează</button>
        </form>
    </section>

    <!-- Afisarea prajiturilor -->
    <section id="lista-prajituri">
        <h2>Lista de prăjituri</h2>
        <ul>
            {% for prajitura in page_obj %}
                <li>
                    <h3>{{ prajitura.nume_prajitura }}</h3>
                    <p><strong>Preț:</strong> {{ prajitura.info.pret }}</p>
                    <p><strong>Descriere:</strong> {{ prajitura.info.descriere }}</p>
                </li>
            {% empty %}
                <p>Nu s-au găsit produse care să corespundă criteriilor de căutare.</p>
            {% endfor %}
        </ul>
    </section>

    <!-- Paginare -->
    <div class="pagination">
        {% if page_obj.has_previous %}
            <a href="?page=1{% if nume %}&nume={{ nume }}{% endif %}{% if pret_min %}&pret_min={{ pret_min }}{% endif %}{% if pret_max %}&pret_max={{ pret_max }}{% endif %}">Prima</a>
            <a href="?page={{ page_obj.previous_page_number }}{% if nume %}&nume={{ nume }}{% endif %}{% if pret_min %}&pret_min={{ pret_min }}{% endif %}{% if pret_max %}&pret_max={{ pret_max }}{% endif %}">Inapoi</a>
        {% endif %}

        <span>Pagina {{ page_obj.number }} din {{ page_obj.paginator.num_pages }}</span>

        {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}{% if nume %}&nume={{ nume }}{% endif %}{% if pret_min %}&pret_min={{ pret_min }}{% endif %}{% if pret_max %}&pret_max={{ pret_max }}{% endif %}">Inainte</a>
            <a href="?page={{ page_obj.paginator.num_pages }}{% if nume %}&nume={{ nume }}{% endif %}{% if pret_min %}&pret_min={{ pret_min }}{% endif %}{% if pret_max %}&pret_max={{ pret_max }}{% endif %}">Ultima</a>
        {% endif %}
    </div>
</body>
</html>
